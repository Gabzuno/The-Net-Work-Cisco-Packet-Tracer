[ ROUTER CONFIGURATION ]


// EXEC/PRIVILEGED MODE //

* Router> en / enable = enter privileged mode
* Router# sh r / run = show running-config
* Router# sh ip ro / route = show routing table
* Router# sh ip int br = interface status
* Router# sh ver = IOS & Hardware info
* Router# wr = save config
* Router# sh [port] sw = view port status


// GLOBAL CONFIG MODE //

* Router# conf t = enter global mode
* Router(config)# host R1 = set hostname
* R1(config)# ip ro <network> <subnetmask> <gateway> = static routing
* R1(config)# ip routing = enable IP routing
* R1(config)# no ip dhcp pool [name] = delete pool
* R1# sh ip dhcp pool = SHOW DHCP POOL

	// CREATING DHCP POOL //
	
	* R1(config)# ip dhcp pool [name]
	* R1(dhcp-config)# network [Network-ID] [Subnet-Mask]
	* R1(dhcp-config)# default-router [Gateway-IP]
	* R1(config)# ip dhcp excluded-address [IP] = exclude for pooling; mostly for router gateway

		// FOR VoIP or IP PHONE //

		* R1(config)# ip dhcp pool [name ex. VOICE]
		* R1(dhcp-config)# network [Network-ID] [Subnet-Mask]
		* R1(dhcp-config)# default-router [Gateway-IP]
		* R1(dhcp-config)# option 150 ip [Gateway-IP]
		
		// ENABLING TELEPHONE SERVICE //
		
		* R1(config)# telephony-service
		* R1(config-telephony)# max-dn [num. of IP PHONE]
		* R1(config-telephony)# max-ephone [num. of IP PHONE]
		* R1(config-telephony)# ip source-address [VOICE VLAN GATEWAY] port 2000
		* R1(config-telephony)# auto assign 1 to [max. IP PHONE]
			Tips: Router# sh ver; look for [uc, voice, cme, unified] ex. c2900-universalk9_npe-mz.SPA.15.4.uc

		// ASSIGNING PHONE NUMBER //

		* R1(config)# ephone-dn [PHONE ID ex.1]
		* R1(config)# number [PHONE NUMBER ex. 2001]
		* R1# do wr 

		// DIAL PEER OVER NETWORK //

		* R1(config)# dial-peer voice [1-2147483647 & should be identical to other routers] voip
		* R1(config-dial-peer)# destination-pattern 2.. (means 200 - 299) ex. 1.. = 100 to 199
		* R1(config-dial-peer)# session target ipv4: [IP OF CONNECTED ROUTERS] ex. 10.0.0.1
			
			Note: Router models with VoIP features: 2811, 2911, 1941.

	// ASSIGNING IP HELPER-ADDRESS //
	
		# Tells where DHCP server lives when the request machine is on different network, acting as a bridge.

		* R1(config)# int [requestor's network port] ex. f0/0 from switch is 192.168.1.1
		* R1(config-if) ip helper-address [DHCP SERVER IP]
			Note: if router connected to another router, enter it's port address instead. ex. 10.10.10.1
	
	// REMOVE IP HELPER //
	
		* no ip helper-address [IP Helper]

// ACL (ACCESS CONTROL LIST) //

	// Allowing packets to specified IP or Network //

		* R1(config)# ip access-list extended [Name]
		* R1(config-ext-nacl)# permit ip host [Source IP] host [Destination IP]
		* R1(config-ext-nacl)# permit ip any any

	// Denying packets to specified IP or Network //

	* R1(config-ext-nacl)# deny ip [Source Network ID] [Source Subnet] [Dest. Net. IP] [Dest. Subnet] ex. 0.0.0.255

	* R1(config-ext-nacl)# permit ip any any = permit rest the rest.
	
	// ASSIGN ACL IN VLAN //

	* R1(config)# int vlan [vlan-ID]
	* R1(config-vlan)# ip access-group [ACL NAME] in (inbound)


// INTERFACE CONFIG //

* R1(config)# int [port] - selecting port interface
* R1(config-if)# ip add <IP> <Subnet mask> = assigning IP to physical int
* R1(config-if)# no ip address = remove IP from physical int
* R1(config-if)# no shut = enable interface


// ROUTING PROTOCOLS //

* router rip = enables routing information protocol (rip)

	R1(config)# router rip

	R1(config-router)# version 1/2

	R1(config-router)# network/net <network address>

* router eigrp [process-id] = enables routers to use hybrid routing protocol which are distance vector and link-state routing protocol.

	R1(config)# router eigrp [1-65535]
	
	R1(config-router)# eigrp router-id [0.0.0.0] ex. 1.1.1.1

	R1(config-router)# net [Network-IP] [wildcard-mask]

		Note: Add both the serial and host network IP

		Note: The [wildcard mask] is the inverse of the subnet mask (e.g., /24 is 0.0.0.255).

	R2(config)# router eigrp [1-65535]

	R2(config-router)# net [Network-IP] [opposite-Subnet-mask]

* router ospf [process-id] = enables routers to dynamically learn network routes using a link-state protocol.
	
	R1(config)# router ospf [1-65535]

	R1(config-router)# router-id [0.0.0.0]

	R1(config-router)# net [network-address] [wildcard-mask] area [area-id]

	R1(config-router)# passive-interface [interface-id]

		Note: Prevents neighbor adjacencies on networks with no routers.

	R1# sh ip ospf neighbor = show listed routers with OSPF configured.

	R1# sh ip ospf database = show listed networks connected through specific area.

* router bgp [autonomous-id] = is standardized exterior gateway protocol that runs the entire internet.

	R1(config)# router bgp [1-65535]
	
	R1(config-router)# bgp router-id [0.0.0.0]
	
	R1(config-router)# neighbor [IP connected routers] remote-as [autonomous-id of the connected routers]

	R1(config-router)# net [network IP] mask [subnet-mask] - connected networks

	R1# sh ip bgp neighbor = sh all connected neighbors
	
	R1# sh ip bgp summary = summarized list of connected neighbors

// HSRP (Hot Standby Router Protocol //

# Provide one virtual gateway IP, more than two routers that has active and standby mode. Automatic Failover based on the priority number.

	* R1(config)# int [port] / [port].[sub-int]
	* R1(config-if)# ip add [IP] [Subnet mask] ex. 192.168.1.3 255.255.255.0
	* R1(config-if)# ip helper-address [Server IP] ex. 192.168.1.2
	* R1(config-if)# standby [0-4095] ip [Virtual Gateway IP] ex. 10 ip 192.168.1.1
	* R1(config-if)# standby [ID] priority [0-255] default 100 ex. 10 priority 110
	* R1(config-if)# standby [ID] preempt = the higher ID will be the main/active router

	* R2(config)# int [port] / [port].[sub-int]
 	* R2(config-if)# ip add [IP] [Subnet mask] ex. 192.168.1.4 255.255.255.0
 	* R2(config-if)# ip helper-address [Server IP] ex. 192.168.1.2
 	* R2(config-if)# standby [0-4095] ip [Virtual Gateway IP] ex. 20 ip 192.168.1.1
 	* R2(config-if)# standby [ID] priority [0-255] default 100 ex. 10 priority 110
 	* R2(config-if)# standby [ID] preempt

	# if R1 shutdowns, R2 will be active and takeover DHCP relay. If R1 comes online, it will takeover the DHCP relay again since it has the higher ID. While, R2 will go back to 		standby. 


// SUBINTERFACE CONFIG (VLAN) //

* Router(config)# int [port].[vlan id] ex. int f0/0.1
* Router(config-subif)# encapsulation dot1q [vlan id] ex. encapsulation dot1q 1
* Router(config-subif)# ip address [IP] [Subnet Mask]
* Router(config-subif)# exit
	
	// DELETE SUBINTERFACE
	
	* Router(config)# no interface [port].[subint]


[ SWITCH CONFIGURATION ]


// EXEC/PRIVILEGED //

* Switch> en = enable privileged mode
* Switch# sh vlan br = VLAN Summary
* Switch# sh mac add = show MAC table
* Switch# sh int status or sh int [port] sw = port status
* Switch# wr = save config
* Switch# erase startup / erase startup-config => reload = factory reset switch
* Switch# show ip dhcp binding = show devices which pool they're getting their IPs


// GLOBAL CONFIG MODE //

* Switch# conf t = enter global mode
* Switch(config)# host SW1 = set hostname
* Switch(config)# vlan [1 - 1005] = Create VLAN
* Switch(config)# no vlan [vlan-id] - delete VLAN
* Switch(config)# no ip domain lookup - prevent unnecessary DNS lookup
* Switch(config-vlan)# name [name] = Name VLAN
* Switch(config-if)# no switchport access vlan [VLAN_ID] = Remove the port from its current VLAN
	
	Note: LAYER 3 SWITCH IS CAPABLE OF DHCP POOL ex. Catalyst 3560	
	
	// SVI (Switch Virtual Interface) // 

	* Switch(config)# int vlan [vlan-id]
	* Switch(config-if)# ip add [IP] [Subnet-Mask] ex. 192.168.1.1 255.255.255.0 = default gateway for the assigned vlan
	* Switch(config-if)# ip routing 
	* Switch(config)# ip default-gateway [GATEWAY IP]

	// ASSIGNING DHCP POOL //
	
	* Switch(config)# ip dhcp excluded-address [IP] vlan default gateway.
	* Switch(config)# ip dhcp pool [name]
	* Switch(dhcp-config)# net [network-id] [subnet-mask]
	* Switch(dhcp-config)# default-router [IP]	

// INTERFACE CONFIG //

* Switch(config)# int [port] = selecting interface/port
* Switch(config)# int range/r [port range ex.f0/0-24] = select range of port


	/// ACCESS ///

	* Switch(config-if)# sw mo acc(switchport mode access) = handle traffic for a single VLAN, sending untagged frames directly to end-user devices. 
	* Switch(config-if or config-if-range)# sw acc vlan [VLAN-ID]
	* Switch(config-if)# no shut = enable port interface

	/// TRUNKING ///

	* Switch(config-if)# sw mo trunk(switchport mode trunk) - carry traffic for multiple VLANs using 802.1Q tagging for inter-switch communication. Uplinks between switches,
	connections to routers.
	* Switch(config-if or config-if-range)# sw trunk allowed vlan [VLAN-IDs] ex. 10,20, etc.
	* Switch(config-if or config-if-range)# sw trunk allowed vlan none - no vlan allowed to the trunk port.
	* Switch(config-if or config-if-range)# sw trunk allowed vlan all - allows all vlan.
	* Switch(config-if or config-if-range)# sw trunk allowed vlan except [VLAN-IDs] - allows except the specified vlan. 
	* Switch# sh int [port] trunk = view trunking of the specified port.

		Note: If using Layer 3 Switch, capable of routing:
	
		* Switch(config-if or config-if-range)# sw trunk encapsulation [dot1q (802.1Q), ISL, negotiate]

		Note: Layer 2 switch automatically assigned their encapsulation into dot1q (recommended).

		// VTP (VLAN TRUNKING PROTOCOL //
		
		* Server-SW(config)# vtp mode server
		* Server-SW(config)# vtp domain [domain.com]
		* Server-SW(config)# vtp password [pass]
		* Server-SW(config)# vtp version [1/2]

		*Client-SW(config)# vtp mode client
		*Client-SW(config)# vtp domain [domain.com]
		*Client-SW(config)# vtp pass [pass]
		*Client-SW(config)# vtp version [1/2]

	/// VOICE ///

	* Switch(config-if or config-if-range)# sw voice vlan [VLAN-ID]
	* Switch(config-if)# no shut = enable port interface


	// ETHERCHANNEL CONFIGURATION //
		
		// PORT AGGREGATION PROTOCOL (PAgP) //

		* SW1# sh etherchannel w/wo summary - view channel
		* SW1(config-if or config-if-range)# channel-group [1-6] [mode] - create channel 
		* SW1(config)# int port-channel [channel-group] - assign channel to port
		* SW1(config)# sw mo trunk/access - assign port mode to the channel


[ LINE CONFIGURATION (Router \& Switch) ]


 // CONSOLE //

* Router(config)# line con 0 = configure an access line

	# SET LOCAL ACCOUNT

		* Router(config)# username [name] secret [password] = This set a login auth when accessing both router or switch.
	
	# SET MACHINE PASSWORD / BEFORE ALLOWING PRIVILEGED MODE

		* Router(config)# enable secret [password]
		* Router9config)# no en secret = remove pass

	# SET PASSWORD

		* Router(config-line)# password [pass]

		* Router(config-line)# login = forces password check

			Note: Assigning Local username is recommended

	# SET LOCAL ACCOUNT FOR LINE LOGIN

		* Router(config-line)# login local

* Router(config-line)# exec-timeout [min] [sec] = Logs out idle console sessions after set period of time.

* Router(config-line)# logging synchronous = controls how logs displayed. Display system messages after user done typing.


 // VTY (Virtual Teletype) = REMOTE //


* Router(config)# line vty 0 4 = 5 users running session simultaneously. 

	Note: VTY = remote access either SSH or telnet

* Router(config-line)# transport input [protocol] = controls which protocols are allowed.

	Note: PROTOCOLS are SSH, telnet, all, and none.

/// SETUP AN SSH ///

	* Router(config)# username [name] secret [pass]

	* Router(config)# enable secret [pass] 

	* Router(config)# ip domain-name [domain ex. lab.local] (necessary)

	* Router(config)# crypto key generate rsa

	* Router(config)# ip ssh version 2

	* Router(config)# line vty 0 4

	* Router(config-line)# transport input ssh

	* Router(config-line)# login local

	* Router(config-line)# exec-timeout 15 0 - 15 mins

	* Router(config-line)# end

	* Router# wr = save the config to the machine's VRAM/Boot


[ WAYS TO BACKUP THE ROUTER/SWITCH CONFIGURATION ]


// MEMORY //

	* Router# copy run start / copy running-config startup-config - saves run (RAM) to start (VRAM)

// TFTP SERVER //

 Turned on the TFTP and assigned an IP same as router's network
	
	// BACKING UP //
	
		* Router# copy run tftp 
	
		* Address or name of remote host \[]? [Server IP]
	
		* Destination filename \[router-confg]? [filename].cfg
		
			Tips: Name files with device + date. ex. R1\_2026-2-1.cfg
	
	// RECOVERING //
	
		* Router# copy tftp run // Restore
	
		* Address or name of remote host \[]? \[ServerIP]
	
		* Source filename \[]? \[filename].cfg